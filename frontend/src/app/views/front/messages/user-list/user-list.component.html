<div class="flex flex-col h-full bg-white">
  <!-- Header -->
  <div class="p-4 border-b border-gray-200 sticky top-0 z-10 bg-white">
    <div class="flex items-center justify-between mb-4">
      <h1 class="text-xl font-semibold text-gray-800">New Conversation</h1>
      <button (click)="router.navigate(['../'], { relativeTo: route })" 
              class="p-2 rounded-full hover:bg-gray-100">
        <i class="fas fa-times text-gray-600"></i>
      </button>
    </div>
    
    <!-- Search -->
    <div class="relative">
      <input [(ngModel)]="searchQuery" 
             (ngModelChange)="loadUsers()"
             type="text" 
             placeholder="Search team members..."
             class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-purple-500 focus:border-purple-500">
      <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
    </div>
  </div>
  
  <!-- User list -->
  <div class="flex-1 overflow-y-auto">
    <!-- Loading state -->
    <div *ngIf="loading" class="flex justify-center items-center h-full">
      <div class="animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-purple-600"></div>
    </div>
    
    <!-- Empty state -->
    <div *ngIf="!loading && users.length === 0" class="flex flex-col items-center justify-center h-full p-6">
      <i class="fas fa-users text-4xl text-gray-300 mb-4"></i>
      <h3 class="text-lg font-medium text-gray-900">No users found</h3>
      <p class="text-gray-500 mt-1">Try a different search term</p>
    </div>
    
    <!-- User list -->
    <ul *ngIf="!loading && users.length > 0" class="divide-y divide-gray-100">
      <li *ngFor="let user of users" 
          (click)="startConversation(user.id)"
          class="p-4 hover:bg-gray-50 cursor-pointer flex items-center">
        <div class="relative flex-shrink-0 mr-3">
          <img [src]="user.image || 'assets/images/default-avatar.png'" 
               class="w-10 h-10 rounded-full object-cover">
          <span *ngIf="user.isOnline" 
                class="absolute bottom-0 right-0 w-3 h-3 bg-green-500 rounded-full border-2 border-white"></span>
        </div>
        <div>
          <h3 class="text-sm font-medium text-gray-900">{{ user.username }}</h3>
          <p class="text-xs text-gray-500">{{ user.email }}</p>
        </div>
      </li>
    </ul>
  </div>
</div>